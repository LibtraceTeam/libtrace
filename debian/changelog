libtrace4 (4.0.17-1) unstable; urgency=medium

  * Added support for PF_RING zero-copy -- this is now the official libtrace `pfring:` format, and the original non-zero-copy version is now available via `pfringold:`.
  * PF_RING formats now default to promiscuous capture mode, which is consistent with other live formats.
  * Fixed incorrect statistics counters for PF_RING formats.
  * Fixed various libpacketdump crashes or infinite loops when presented with bogus packet content.
  * Fixed bug where `pfringold:` was not setting the `order` field for packets.
  * Fixed bug where writing packets to a virtual interface via `ring:` would cause libtrace to hang.
  * Fixed bug where DPDK port stats could not be reset if using Napatech DPDK.
  * Fixed race condition in the `etsilive:` format.
  * Fixed various memory errors and leaks in the `etsilive:` format.
  * Fixed race condition in `tracertstats` when processing a user interrupt.
  * Improved capture speed for `pfringold:`.
  * `ring:` format now supports `trace_flush_output()` method.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Fri, 9 Jul 2021 14:09:06 +1200

libtrace4 (4.0.16-2) UNRELEASED; urgency=medium

  * Trim trailing whitespace.
  * Use secure URI in Homepage field.
  * Bump debhelper from deprecated 9 to 12.
  * Set debhelper-compat version in Build-Depends.
  * Fix day-of-week for changelog entry 4.0.0-1.
  * Remove Section on libtrace4, Section on libpacketdump4 that duplicate
    source.
  * Avoid explicitly specifying -Wl,--as-needed linker flag.

 -- Perry Lorier <perry@windy.meta.net.nz>  Sun, 18 Jul 2021 15:51:11 -0000

libtrace4 (4.0.16-1) unstable; urgency=medium

  * Add support for PF_RING.
  * Add ability to prepend input configuration options to a libtrace URI.
  * Add new API function: trace_hold_packet() to allow users to safely
    retain a reference to a packet for later use.
  * Add new API function: trace_set_coremap() to bind per-packet threads to
    specific CPU cores.
  * Fixed bad packet header structure layouts for ATM headers and 802.1q
    headers.
  * Fixed various bugs in the XDP capture format.
  * DAG transmit functionality should now work correctly.
  * tracertstats will now process trace files at full speed rather than
    try to replicate the original trace timing.
  * XDP will now try to perform packet hashing on the NIC.
  * Improved receive speed for Linux native capture formats.
  * Add ability to run a libtrace program against multiple DPDK inputs.
  * Add support for Mellanox DPDK libraries.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Wed, 17 Mar 2021 11:31:29 +1300

libtrace4 (4.0.15-1) unstable; urgency=medium

  * Fix bug where reading pcapng trace files would produce endless
    "NULL meta passed into trace_get_payload_from_meta()" errors.
  * Fix bug in libpacketdump which would cause packets captured
    using SLL to be truncated by 16 bytes.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Wed, 28 Oct 2020 16:28:08 +1300

libtrace4 (4.0.14-2) unstable; urgency=medium

  * Force libwandder2 as a dependency over libwandder1, to ensure
    consistency with upcoming OpenLI release.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Fri, 04 Sep 2020 15:59:19 +1200

libtrace4 (4.0.14-1) unstable; urgency=medium

  * New upstream release.
  * Add read and write support for AF_XDP (xdp:). Users may run the provided
    eBPF program or write their own custom one.
  * Add basic API for parsing RADIUS messages: trace_get_radius(),
      trace_get_radius_avp(), trace_get_radius_username().
  * tracediff can now write differing packets to libtrace outputs, rather
    than just dumping them to the terminal.
  * Updated tracediff to be able to "look ahead" to see if packets can be
    matched rather than just directly comparing packets in the same position.
  * Added option to tracereplay to control transmit packet batch size.
  * Fixed bug in traceends that was produced invalid byte counter values.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Thu, 06 Aug 2020 17:04:38 +1200

libtrace4 (4.0.13-1) unstable; urgency=medium

  * New upstream release.
  * Add support for DPDK vdevs (both input and output).
  * Update DPDK support to work with 19.11 and 20.02 releases.
  * Fix a number of minor bugs with the DPDK format.
  * tracereplay can now replay traces containing raw IP traffic.
  * Fix libpacketdump segfault when processing corrupt/bogus headers.
  * Fix bugs when using a dedicated hasher thread with a parallel input.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Tue, 26 May 2020 16:39:54 +1200

libtrace4 (4.0.12-1) unstable; urgency=medium

  * New upstream release.
  * Added new tool: tracemcast.
  * Added support for corsaro-tagged packets received via nDAG multicast.
  * Improved performance of multiple calls to trace_get_wire_length() on
    the same packet.
  * Fix truncation bug when a packet has a longer capture length than
    wire length due to the addition of post-capture meta-data.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Fri, 27 Mar 2020 13:50:11 +1300

libtrace4 (4.0.11-1) unstable; urgency=medium

  * New upstream release.
  * Fix bug where trace_apply_filter() would not work correctly with a
    parallel trace input.
  * Fix bug where non-parallel ETSI programs would fail to halt nicely.
  * Fix libpacketdump being unable to decode Ethernet within MPLS properly.
  * Fix libtrace (trace_get_layer3()) being unable to decode Ethernet
    within MPLS properly.
  * tracereplay now strips VLAN and MPLS headers before trying to replay a
    packet from a trace file.
  * Fix bug where the simple circular buffer would leak shared memory files.
  * Fix segfault when using trace_apply_filter() on a packet which came from
    an input trace that is now "closed".
  * Fix bug where libtrace could try to flush a NULL pcap file handle.
  * debian-specific: fix missing dependency on libpacketdump4 for
    libtrace4-tools.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Thu, 13 Feb 2020 15:09:44 +1300

libtrace4 (4.0.10-1) unstable; urgency=medium

  * New upstream release.
  * Fix "SIOCGSTAMP undeclared" error when building against newer Linux kernels.
  * Fix corruption bug when running multiple etsilive: input processes.
  * Add new API function trace_get_errstr(), which provides error message
    strings for a given libtrace error number.
  * Increased TTL for nDAG multicast join messages to 4.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Wed, 6 Nov 2019 13:37:51 +1300

libtrace4 (4.0.9-1) unstable; urgency=medium

  * New upstream release.
  * Update DPDK code to work with newer DPDK releases (18.11 especially).
  * Fix segfault when a DAG device fails to open.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Mon, 15 Jul 2019 16:34:34 +1200

libtrace4 (4.0.8-1) unstable; urgency=medium

  * New upstream release.
  * Added ability to anonymise RADIUS traffic to traceanon.
  * traceanon now uses YAML configuration file instead of CLI arguments.
  * Fixed bug where ndag multicast would bind to all addresses, not
    just the address of the group it had subscribed to.
  * Fixed segfault when calling trace_ppause() before per packet threads
    have been created.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Mon, 01 Jul 2019 11:37:38 +1200

libtrace4 (4.0.7-1) unstable; urgency=medium

  * New upstream release.
  * Added new API for exploring in-stream meta-data records.
  * Added new API for inspecting subsequent layer-2 headers.
  * Added support for reading and writing TZSP sniffing streams.

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Thu, 02 May 2019 16:31:15 +1200

libtrace4 (4.0.6-2) unstable; urgency=low

  * Fix bad dpdk dependencies in libtrace4 package

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Wed, 16 Jan 2019 16:49:04 +1300

libtrace4 (4.0.6-1) unstable; urgency=low

  * New upstream release

 -- Shane Alcock <shane.alcock@waikato.ac.nz>  Tue, 15 Jan 2019 11:50:06 +1300

libtrace4 (4.0.0-1) unstable; urgency=medium

  * New upstream release

 -- Brad Cowie <brad@wand.net.nz>  Mon, 07 Mar 2016 10:24:40 +1300
